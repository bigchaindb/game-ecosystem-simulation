'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

exports.default = deepMatchObject;
/**
 * Recursively tests an object against a "match" object to see if the object is similar to the
 * "match" object. In other words, this will deeply traverse the "match" object's properties and
 * check them against the object by using the testFn.
 *
 * The object is considered a match if all primitive properties in the "match" object are found
 * and accepted in the object by the testFn.
 *
 * @param  {object}     obj    Object to test
 * @param  {object}     match  "Match" object to test against
 * @param  {(function)} testFn Function to use on each property test. Return true to accept the match.
 *                             By default, applies strict equality using ===
 * @return {boolean}           True if obj matches the "match" object
 */
function deepMatchObject(obj, match) {
    var testFn = arguments.length <= 2 || arguments[2] === undefined ? function (objProp, matchProp) {
        return objProp === matchProp;
    } : arguments[2];

    if ((typeof match === 'undefined' ? 'undefined' : _typeof(match)) !== 'object') {
        throw new Error('Your specified match argument was not an object');
    }
    if (typeof testFn !== 'function') {
        throw new Error('Your specified test function was not a function');
    }

    return Object.keys(match).reduce(function (result, matchKey) {
        if (!result) {
            return false;
        }

        var objProp = obj && obj[matchKey];
        var matchProp = match[matchKey];

        if ((typeof matchProp === 'undefined' ? 'undefined' : _typeof(matchProp)) === 'object') {
            return (typeof objProp === 'undefined' ? 'undefined' : _typeof(objProp)) === 'object' ? deepMatchObject(objProp, matchProp, testFn) : false;
        } else {
            return testFn(objProp, matchProp);
        }
    }, true);
}
module.exports = exports['default'];